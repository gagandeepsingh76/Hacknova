<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Interactive Breadboard Circuit Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { 
            --bg-color: #020617; 
            --card-color: rgba(15, 23, 42, 0.7);
            --border-color: #1e293b; 
            --text-light: #e2e8f0;
            --accent-color: #f97316; /* Orange */
        }
        body { background-color: var(--bg-color); color: var(--text-light); font-family: 'Inter', sans-serif; }
        .glass-card { background: var(--card-color); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); border: 1px solid var(--border-color); }
        input[type=range] { -webkit-appearance: none; appearance: none; width: 100%; height: 6px; background: var(--border-color); border-radius: 99px; outline: none; transition: background-color 0.2s ease; }
        input[type=range]:hover { background: #334155; }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; appearance: none; width: 20px; height: 20px;
            border-radius: 50%; background: var(--accent-color); border: 2px solid var(--text-light);
            cursor: pointer; transition: transform 0.1s ease-in-out, box-shadow 0.2s ease;
            box-shadow: 0 0 0 2px rgba(249, 115, 22, 0.2);
        }
        input[type=range]::-webkit-slider-thumb:hover { transform: scale(1.1); box-shadow: 0 0 0 4px rgba(249, 115, 22, 0.4); }
        .component-btn {
            background-color: var(--border-color);
            border: 1px solid #334155;
            transition: all 0.2s ease;
        }
        .component-btn.active, .component-btn:hover {
            background-color: #334155;
            border-color: var(--accent-color);
            color: var(--accent-color);
        }
        canvas { cursor: crosshair; }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
</head>
<body class="min-h-screen p-4 sm:p-6 lg:p-8">
    <div class="container mx-auto max-w-7xl">
        <header class="mb-6 text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-amber-400">Breadboard Circuit Simulator</h1>
            <p class="mt-2 text-slate-400 max-w-2xl mx-auto">Build, simulate, and analyze basic electronic circuits on a virtual breadboard.</p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div class="glass-card shadow-2xl p-2 rounded-2xl lg:col-span-2">
                <canvas id="simulation-canvas" class="w-full h-[500px] md:h-[600px] rounded-lg"></canvas>
            </div>
            
            <div class="space-y-6">
                 <h2 class="text-2xl font-bold text-center text-slate-300">Circuit Builder & Analysis</h2>
                <div class="glass-card shadow-lg p-5 rounded-2xl space-y-4">
                    <h3 class="font-bold text-lg text-orange-300 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line></svg>
                        Component Palette
                    </h3>
                    <div class="grid grid-cols-2 gap-4 pt-2">
                        <button id="tool-wire" class="component-btn p-3 rounded-lg text-center active">Wire</button>
                        <button id="tool-resistor" class="component-btn p-3 rounded-lg text-center">Resistor</button>
                        <button id="tool-led" class="component-btn p-3 rounded-lg text-center">LED</button>
                        <button id="tool-remove" class="component-btn p-3 rounded-lg text-center">Remove</button>
                    </div>
                </div>

                <div class="glass-card shadow-lg p-5 rounded-2xl space-y-4">
                     <h3 class="font-bold text-lg text-orange-300 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"></path><path d="m9 12 2 2 4-4"></path></svg>
                        Properties & Analysis
                    </h3>
                     <div id="properties-panel" class="text-sm pt-2 space-y-4">
                        <div>
                            <label for="supply-voltage" class="font-medium text-slate-300 flex justify-between">Supply Voltage: <span id="voltage-val">5.0 V</span></label>
                            <input type="range" id="supply-voltage" min="1" max="12" step="0.1" value="5.0">
                        </div>
                        <div id="resistor-prop" class="hidden">
                            <label for="resistance" class="font-medium text-slate-300 flex justify-between">Resistance: <span id="resistance-val">220 立</span></label>
                            <input type="range" id="resistance" min="10" max="1000" step="10" value="220">
                        </div>
                         <div id="led-prop" class="hidden">
                            <label for="led-color" class="font-medium text-slate-300">LED Color</label>
                            <select id="led-color" class="w-full mt-1 bg-slate-800 border border-slate-600 rounded-lg px-3 py-2 text-white">
                                <option value="red">Red</option>
                                <option value="green">Green</option>
                                <option value="blue">Blue</option>
                            </select>
                        </div>
                     </div>
                     <div class="text-sm pt-4 space-y-2 border-t border-slate-700">
                        <p class="flex justify-between text-slate-400">Total Resistance: <span id="total-r-val" class="font-mono text-white">0 立</span></p>
                        <p class="flex justify-between text-slate-400">Circuit Current: <span id="current-val" class="font-mono text-white">0.000 A</span></p>
                        <p class="flex justify-between text-slate-400">LED Status: <span id="led-status-val" class="font-mono font-semibold text-green-400">OFF</span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

<script>
// A significantly simplified breadboard simulator for demonstration purposes.
// A full implementation would require a graph-based circuit solver.
(function() {
    const canvas = document.getElementById('simulation-canvas');
    const ctx = canvas.getContext('2d');
    
    // ... (DOM element references will go here)

    let state = {
        tool: 'wire',
        voltage: 5.0,
        wiring: false,
        startPin: null,
        components: [],
        selectedComponent: null,
    };

    const BREADBOARD = {
        holeRadius: 3,
        holeSpacing: 12,
        rows: 30,
        cols: 5,
        railRows: 2,
    };

    function resizeCanvas() {
        const simRect = canvas.parentElement.getBoundingClientRect();
        canvas.width = simRect.width;
        canvas.height = simRect.height > 100 ? simRect.height : 600;
        draw();
    }
    
    function draw() {
        ctx.fillStyle = '#1e293b';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        drawBreadboard();
        drawComponents();
    }

    function drawBreadboard() {
        const bbWidth = (BREADBOARD.cols * 2 + 4) * BREADBOARD.holeSpacing;
        const bbHeight = (BREADBOARD.rows + BREADBOARD.railRows * 2 + 2) * BREADBOARD.holeSpacing;
        const x0 = canvas.width / 2 - bbWidth / 2;
        const y0 = canvas.height / 2 - bbHeight / 2;
        
        ctx.fillStyle = '#f1f5f9';
        ctx.fillRect(x0, y0, bbWidth, bbHeight);

        // Holes
        ctx.fillStyle = '#2c3e50';
        for(let i=0; i < BREADBOARD.rows; i++) {
            for(let j=0; j < BREADBOARD.cols * 2; j++) {
                if(j === BREADBOARD.cols) continue;
                const x = x0 + (j + 2) * BREADBOARD.holeSpacing + (j > BREADBOARD.cols ? BREADBOARD.holeSpacing*2 : 0);
                const y = y0 + (i + BREADBOARD.railRows + 1) * BREADBOARD.holeSpacing;
                ctx.beginPath();
                ctx.arc(x, y, BREADBOARD.holeRadius, 0, Math.PI*2);
                ctx.fill();
            }
        }
    }

    function drawComponents() {
        // This is a placeholder for a much more complex rendering logic
        // for components and wires based on the `state.components` array.
        // For this example, let's draw a predefined simple circuit.
        
        const bbWidth = (BREADBOARD.cols * 2 + 4) * BREADBOARD.holeSpacing;
        const bbHeight = (BREADBOARD.rows + BREADBOARD.railRows * 2 + 2) * BREADBOARD.holeSpacing;
        const x0 = canvas.width / 2 - bbWidth / 2;
        const y0 = canvas.height / 2 - bbHeight / 2;

        // VCC wire
        ctx.strokeStyle = '#ef4444'; ctx.lineWidth = 4;
        ctx.beginPath();
        ctx.moveTo(x0 - 20, y0 + BREADBOARD.holeSpacing);
        ctx.lineTo(x0 + 2 * BREADBOARD.holeSpacing, y0 + BREADBOARD.holeSpacing);
        ctx.stroke();

        // GND wire
        ctx.strokeStyle = '#3b82f6'; ctx.lineWidth = 4;
        ctx.beginPath();
        ctx.moveTo(x0 - 20, y0 + 2 * BREADBOARD.holeSpacing);
        ctx.lineTo(x0 + 2 * BREADBOARD.holeSpacing, y0 + 2 * BREADBOARD.holeSpacing);
        ctx.stroke();

        // Simple static circuit for visual demonstration
        const rX1 = x0 + 2 * BREADBOARD.holeSpacing;
        const rY1 = y0 + (5 + BREADBOARD.railRows + 1) * BREADBOARD.holeSpacing;
        const rX2 = x0 + 7 * BREADBOARD.holeSpacing;
        const rY2 = rY1;
        drawResistor(rX1, rY1, rX2, rY2);
        
        const ledX1 = rX2;
        const ledY1 = rY1;
        const ledX2 = ledX1 + 5 * BREADBOARD.holeSpacing;
        const ledY2 = ledY1;
        drawLED(ledX1, ledY1, ledX2, ledY2);

        // Connect to rails
        ctx.strokeStyle = '#e2e8f0'; ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(rX1, rY1);
        ctx.lineTo(rX1, y0 + BREADBOARD.holeSpacing);
        ctx.moveTo(ledX2, ledY2);
        ctx.lineTo(ledX2, y0 + 2 * BREADBOARD.holeSpacing);
        ctx.stroke();
    }

    function drawResistor(x1, y1, x2, y2) {
        ctx.strokeStyle = '#e2e8f0'; ctx.lineWidth = 1;
        ctx.beginPath(); ctx.moveTo(x1, y1); ctx.lineTo(x1 + 10, y1); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(x2, y2); ctx.lineTo(x2 - 10, y2); ctx.stroke();
        ctx.fillStyle = '#fde68a';
        ctx.fillRect(x1 + 10, y1 - 8, x2 - x1 - 20, 16);
    }
    
    function drawLED(x1, y1, x2, y2, i = 0.01) {
        const glow = Math.min(1, i * 100);
        ctx.strokeStyle = '#e2e8f0'; ctx.lineWidth = 1;
        ctx.beginPath(); ctx.moveTo(x1, y1); ctx.lineTo(x1 + 10, y1); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(x2, y2); ctx.lineTo(x2 - 10, y2); ctx.stroke();
        
        ctx.fillStyle = `rgba(239, 68, 68, ${0.4 + 0.6 * glow})`;
        ctx.beginPath();
        ctx.arc(x1 + 22, y1, 12, 0, Math.PI * 2);
        ctx.fill();
        if(glow > 0.5) {
            ctx.fillStyle = `rgba(239, 68, 68, ${glow * 0.3})`;
            ctx.beginPath();
            ctx.arc(x1 + 22, y1, 18, 0, Math.PI * 2);
            ctx.fill();
        }
    }
    
    function analyzeCircuit() {
        const v = parseFloat(document.getElementById('supply-voltage').value);
        const r = parseFloat(document.getElementById('resistance').value);
        const vLed = 2.0; // Assume red LED
        const i = Math.max(0, (v - vLed) / r);
        
        document.getElementById('total-r-val').textContent = `${r.toFixed(0)} 立`;
        document.getElementById('current-val').textContent = `${i.toFixed(3)} A`;
        
        let status = 'OFF';
        if (i * 1000 > 30) status = 'BURNT OUT';
        else if (i > 0.001) status = 'ON';
        
        document.getElementById('led-status-val').textContent = status;

        draw(); // Redraw with new brightness
    }


    // Dummy handlers for UI interaction - a full implementation would be much more complex.
    document.getElementById('supply-voltage').addEventListener('input', e => {
        document.getElementById('voltage-val').textContent = `${parseFloat(e.target.value).toFixed(1)} V`;
        analyzeCircuit();
    });
    document.getElementById('resistance').addEventListener('input', e => {
        document.getElementById('resistance-val').textContent = `${parseFloat(e.target.value).toFixed(0)} 立`;
        analyzeCircuit();
    });

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();
    analyzeCircuit(); // Initial analysis
})();
</script>
</body>
</html>

